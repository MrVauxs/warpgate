<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding favicon -->
    

    <!-- Adding meta -->
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      utility/module.js
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">Home</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><div class="accordion collapsed" id="9625456" > <h3 class="accordion-heading">Classes<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id=6938434><div class="accordion-heading child"><a href="MODULE.html">MODULE</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="MODULE.html#.applySettings">applySettings</a></li><li data-type='method'><a href="MODULE.html#.buttonDialog">buttonDialog</a></li><li data-type='method'><a href="MODULE.html#.firstOwner">firstOwner</a></li><li data-type='method'><a href="MODULE.html#.format">format</a></li><li data-type='method'><a href="MODULE.html#.getTokenData">getTokenData</a></li><li data-type='method'><a href="MODULE.html#.isFirstOwner">isFirstOwner</a></li><li data-type='method'><a href="MODULE.html#.localize">localize</a></li><li data-type='method'><a href="MODULE.html#.menu">menu</a></li><li data-type='method'><a href="MODULE.html#.setting">setting</a></li><li data-type='method'><a href="MODULE.html#.unique">unique</a></li><li data-type='method'><a href="MODULE.html#.wait">wait</a></li><li data-type='method'><a href="MODULE.html#.waitFor">waitFor</a></li></ul></li><li class="accordion collapsed child" id=3572255><div class="accordion-heading child"><a href="Mutation.html">Mutation</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="Mutation.html#.fromStackData">fromStackData</a></li><li data-type='method'><a href="Mutation.html#_invertUpdate">_invertUpdate</a></li><li data-type='method'><a href="Mutation.html#_mergeEmbeddedUpdate">_mergeEmbeddedUpdate</a></li><li data-type='method'><a href="Mutation.html#add">add</a></li><li data-type='method'><a href="Mutation.html#addEmbedded">addEmbedded</a></li><li data-type='method'><a href="Mutation.html#callAll">callAll</a></li><li data-type='method'><a href="Mutation.html#callback">callback</a></li><li data-type='method'><a href="Mutation.html#description">description</a></li><li data-type='method'><a href="Mutation.html#getUpdate">getUpdate</a></li><li data-type='method'><a href="Mutation.html#hidden">hidden</a></li><li data-type='method'><a href="Mutation.html#link">link</a></li><li data-type='method'><a href="Mutation.html#name">name</a></li><li data-type='method'><a href="Mutation.html#permanent">permanent</a></li></ul></li><li class="accordion collapsed child" id=1488426><div class="accordion-heading child"><a href="MutationStack.html">MutationStack</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="MutationStack.html#commit">commit</a></li><li data-type='method'><a href="MutationStack.html#create">create</a></li><li data-type='method'><a href="MutationStack.html#deleteAll">deleteAll</a></li><li data-type='method'><a href="MutationStack.html#set">set</a></li><li data-type='method'><a href="MutationStack.html#unroll">unroll</a></li><li data-type='method'><a href="MutationStack.html#updateAll">updateAll</a></li></ul></li><li class="accordion-list" id=""><a href="StackData.html">StackData</a></li><li class="accordion-list" id=""><a href="UpdateQueue.html">UpdateQueue</a></li></ul> </div><div class="accordion collapsed" id="689025" > <h3 class="accordion-heading">Externals<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="external-Collection.html">Collection</a></li><li class="accordion-list" id=""><a href="external-DocumentData.html">DocumentData</a></li></ul> </div><div class="accordion collapsed" id="1210870" > <h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#queueUpdate">queueUpdate</a></li><li class="accordion-list" id=""><a href="global.html#warpgate">warpgate</a></li></ul> </div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      
      <h1 id='page-title' class="page-title">
        utility/module.js
      </h1>
      

      



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** 
 * MIT (c) 2021 DnD5e Helpers
 * Modified and extended heavily
 */
import {
  logger
} from '../utility/logger.js';

const NAME = "warpgate";
const PATH = `/modules/${NAME}`;

/**
 * @class
 */
export class MODULE {
  static async register() {
    logger.info("Initializing Module");
    MODULE.settings();
  }

  static data = {};

  static async build() {
    MODULE.data = {
      name: NAME,
      path: PATH,
      title: "Warp Gate"
    };
    logger.info("Module Data Built");

    /**
     * @this Function
     */
    function toJSON() {
    /*
     * @this Function
     */
      let whitespace = /\s/;
      let pair = /\(\)|\[\]|\{\}/;

      let args = new Array();
      let string = this.toString();

      let fat = (new RegExp(
        '^\s*(' +
        ((this.name) ? this.name + '|' : '') +
        'function' +
        ')[^)]*\\('
      )).test(string);

      let state = 'start';
      let depth = new Array(); 
      let tmp = 0;

      for (let index = 0; index &lt; string.length; ++index) {
        let ch = string[index];

        switch (state) {
          case 'start':
            if (whitespace.test(ch) || (fat &amp;&amp; ch != '('))
              continue;

            if (ch == '(') {
              state = 'arg';
              tmp = index + 1;
            }
            else {
              state = 'singleArg';
              tmp = index;
            }
            break;

          case 'arg':
          case 'singleArg':
            let escaped = depth.length > 0 &amp;&amp; depth[depth.length - 1] == '\\';
            if (escaped) {
              depth.pop();
              continue;
            }
            if (whitespace.test(ch))
              continue;

            switch (ch) {
              case '\\':
                depth.push(ch);
                break;

              case ']':
              case '}':
              case ')':
                if (depth.length > 0) {
                  if (pair.test(depth[depth.length - 1] + ch))
                    depth.pop();
                  continue;
                }
                if (state == 'singleArg')
                  throw '';
                args.push(string.substring(tmp, index).trim());
                state = (fat) ? 'body' : 'arrow';
                break;

              case ',':
                if (depth.length > 0)
                  continue;
                if (state == 'singleArg')
                  throw '';
                args.push(string.substring(tmp, index).trim());
                tmp = index + 1;
                break;

              case '>':
                if (depth.length > 0)
                  continue;
                if (string[index - 1] != '=')
                  continue;
                if (state == 'arg')
                  throw '';
                args.push(string.substring(tmp, index - 1).trim());
                state = 'body';
                break;

              case '{':
              case '[':
              case '(':
                if (
                  depth.length &lt; 1 ||
                  !(depth[depth.length - 1] == '"' || depth[depth.length - 1] == '\'')
                )
                  depth.push(ch);
                break;

              case '"':
                if (depth.length &lt; 1)
                  depth.push(ch);
                else if (depth[depth.length - 1] == '"')
                  depth.pop();
                break;
              case '\'':
                if (depth.length &lt; 1)
                  depth.push(ch);
                else if (depth[depth.length - 1] == '\'')
                  depth.pop();
                break;
            }
            break;

          case 'arrow':
            if (whitespace.test(ch))
              continue;
            if (ch != '=')
              throw '';
            if (string[++index] != '>')
              throw '';
            state = 'body';
            break;

          case 'body':
            if (whitespace.test(ch))
              continue;
            string = string.substring(index);

            if (ch == '{')
              string = string.replace(/^{\s*(.*)\s*}\s*$/, '$1');
            else
              string = 'return ' + string.trim();

            index = string.length;
            break;

          default:
            throw '';
        }
      }

      return ['Function', args, string];
    };

    Object.assign(Function.prototype, {toJSON});
  }

  /**
   * Helper for retrieving a setting under this module's scope
   * @param {string} key 
   * @returns {any}
   */ 
  static setting(key) {
    return game.settings.get(MODULE.data.name, key);
  }

  /**
   * @param {string} stringId
   */
  static localize(stringId) {
    return game.i18n.localize(stringId);
  }

  /**
   * @param {string} stringId
   * @param {Object} [data={}]
   */
  static format(stringId, data = {}) {
    return game.i18n.format(stringId, data);
  }

  static firstGM() {
    return game.users?.find(u => u.isGM &amp;&amp; u.active);
  }

  static isFirstGM() {
    return game.userId === MODULE.firstGM()?.id;
  }

  /** @param {ClientDocument} doc
   * @returns {ClientDocument|undefined}
   */
  static firstOwner(doc) {
    /* null docs could mean an empty lookup, null docs are not owned by anyone */
    if (!doc) return;

    const playerOwners = Object.entries(doc.data.permission ?? {})
      .filter(([id, level]) => (!game.users?.get(id)?.isGM &amp;&amp; game.users?.get(id)?.active) &amp;&amp; level === 3)
      .map(([id, _]) => id);

    if (playerOwners.length > 0) {
      return game.users?.get(playerOwners[0]);
    }

    /* if no online player owns this actor, fall back to first GM */
    return MODULE.firstGM();
  }

  /** Players first, then GM
   * @param {ClientDocument} doc
   */
  static isFirstOwner(doc) {
    return game.user?.id === MODULE.firstOwner(doc)?.id;
  }

  /**
   * @param {number} ms
   */
  static async wait(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms))
  }

  /**
   * @param {Function} fn
   */
  static async waitFor(fn, maxIter = 600, iterWaitTime = 100, i = 0) {

    /**
     * @param {number} current
     * @param {number} max
     */
    const continueWait = (current, max) => {

      /* negative max iter means wait forever */
      if (maxIter &lt; 0) return true;

      return current &lt; max;
    }

    while (!fn(i, ((i * iterWaitTime) / 100)) &amp;&amp; continueWait(i, maxIter)) {
      i++;
      await MODULE.wait(iterWaitTime);
    }
    return i === maxIter ? false : true;
  }

  static settings() {

  }

  /**
   * @param {Object} settingsData
   */
  static applySettings(settingsData) {
    Object.entries(settingsData).forEach(([key, data]) => {
      game.settings.register(
        MODULE.data.name, key, {
          name: MODULE.localize(`setting.${key}.name`),
          hint: MODULE.localize(`setting.${key}.hint`),
          ...data
        }
      );
    });
  }

  /**
   *
   * @param {string} actorName
   * @param {object} tokenUpdates
   * @returns {Promise&lt;object>}
   */
  static async getTokenData(actorName, tokenUpdates) {

    //get source actor
    const sourceActor = game.actors?.getName(actorName);
    if (!sourceActor) {
      logger.error(`Could not find world actor named "${actorName}"`);
      return false;
    }

    //get prototoken data -- need to prepare potential wild cards for the template preview
    let protoData = (await sourceActor.getTokenData(tokenUpdates));
    if (!protoData) {
      logger.error(`Could not find proto token data for ${actorName}`);
      return false;
    }

    return protoData;
  }

  static getMouseStagePos() {
    const mouse = canvas.app?.renderer.plugins.interaction.mouse;
    return mouse.getLocalPosition(canvas.app?.stage);
  }

  /**
   *
   * @param {object} obj 
   * @param {object} remove 
   * @returns {object}
   */
  static unique(obj, remove) {
    // Validate input
    const ts = getType(obj);
    const tt = getType(remove);
    if ((ts !== "Object") || (tt !== "Object")) throw new Error("One of source or template are not Objects!");

    // Define recursive filtering function 
    const _filter = function (s, t, filtered) {
      for (let [k, v] of Object.entries(s)) {
        let has = t.hasOwnProperty(k);
        let x = t[k];

        // Case 1 - inner object
        if (has &amp;&amp; (getType(v) === "Object") &amp;&amp; (getType(x) === "Object")) {
          filtered[k] = _filter(v, x, {});
        }

        // Case 2 - inner key
        else if (!has) {
          filtered[k] = v;
        }
      }
      return filtered;
    };

    // Begin filtering at the outer-most layer
    return _filter(obj, remove, {});
  }

  /**
   * Helper function for quickly creating a simple dialog with labeled buttons and associated data. 
   * Useful for allowing a choice of actors to spawn prior to `warpgate.spawn`.
   *
   * @param {Object} data 
   * @param {Object[]} data.buttons
   * @param {string} [data.title]
   * @param {string} [data.content]
   * @param {Object} [data.options]
   *
   * @param {string} [direction = 'row'] 'column' or 'row' accepted. Controls layout direction of dialog.
   */
  static async buttonDialog(data, direction = 'row') {
    return await new Promise(async (resolve) => {

      /** @type Object&lt;string, Dialog.Button> */
      let buttons = {},
        dialog;

      data.buttons.forEach((button) => {
        buttons[button.label] = {
          label: button.label,
          callback: () => resolve(button.value)
        }
      });

      dialog = new Dialog({
        title: data.title ?? 'Prompt',
        content: data.content ?? '',
        buttons: buttons,
        close: () => resolve(false),
        render: (html) => {
          html[0].find('.dialog-buttons').css({'flex-direction': direction});
        }
      }, {
        /*width: '100%',*/
        height: '100%',
        ...data.options
      });

      dialog.render(true);
      
    });
  }

  static dialogInputs = (data) => {
    const content = `
      &lt;table style="width:100%">
      ${data.map(({type, label, options}, i) => {
        if (type.toLowerCase() === 'button') { return '' }
        if (type.toLowerCase() === 'header') {
            return `&lt;tr>&lt;td colspan = "2">&lt;h2>${label}&lt;/h2>&lt;/td>&lt;/tr>`;
        } else if (type.toLowerCase() === 'info') {
          return `&lt;tr>&lt;td colspan="2">${label}&lt;/td>&lt;/tr>`;
        } else if (type.toLowerCase() === `select`) {
          return `&lt;tr>&lt;th style="width:50%">&lt;label>${label}&lt;/label>&lt;/th>&lt;td style="width:50%">&lt;select id="${i}qd">${options.map((e, i) => `&lt;option value="${e}">${e}&lt;/option>`).join(``)}&lt;/td>&lt;/tr>`;
        } else if (type.toLowerCase() == `radio`) {
          return `&lt;tr>&lt;th style="width:50%">&lt;label>${label}&lt;/label>&lt;/th>&lt;td style="width:50%">&lt;input type="${type}" id="${i}qd" ${(options instanceof Array ? options[1] : false ?? false) ? 'checked' : ''} value="${label}" name="${options instanceof Array ? options[0] : options ?? 'radio'}"/>&lt;/td>&lt;/tr>`;
        } else if (type.toLowerCase() === `checkbox` ) {
          return `&lt;tr>&lt;th style="width:50%">&lt;label>${label}&lt;/label>&lt;/th>&lt;td style="width:50%">&lt;input type="${type}" id="${i}qd" ${(options instanceof Array ? options[0] : options ?? false) ? 'checked' : ''} name="${label}"/>&lt;/td>&lt;/tr>`;
        } else {
          return `&lt;tr>&lt;th style="width:50%">&lt;label>${label}&lt;/label>&lt;/th>&lt;td style="width:50%">&lt;input type="${type}" id="${i}qd" value="${options instanceof Array ? options[0] : options}"/>&lt;/td>&lt;/tr>`;
        }
        }).join(``)
      } &lt;/table>`;

        return content;
  }


    /* See readme at github.com/trioderegion/warpgate */
    static async dialog(data = {}, title = 'Prompt', submitLabel = 'Ok') {
      data = data instanceof Array ? data : [data];

      return await new Promise((resolve) => {
        let content = MODULE.dialogInputs(data); 
        new Dialog({
          title,
          content,
          buttons: {
            Ok: {
              label: submitLabel,
              callback: (html) => {
                resolve(Array(data.length).fill(0).map((_, i) => {
                  let {
                    type
                  } = data[i];
                  if (type.toLowerCase() === `select`) {
                    return html[0].find(`select#${i}qd`).val();
                  } else {
                    switch (type.toLowerCase()) {
                      case `text`:
                      case `password`:
                        return html[0].find(`input#${i}qd`)[0].value;
                      case `radio`:
                        return html[0].find(`input#${i}qd`)[0].checked ? html[0].find(`input#${i}qd`)[0].value : false;
                      case `checkbox`:
                        return html[0].find(`input#${i}qd`)[0].checked;
                      case `number`:
                        return html[0].find(`input#${i}qd`)[0].valueAsNumber;
                    }
                  }
                }));
              }
            }
          }
        }).render(true);
      });
    }

    /**
     * Advanced dialog helper providing multiple input type options as well as user defined buttons. This combines the functionality
     * of `buttonDialog` as well as `dialog`
     *
     * @static
     * @param {object} [data]  follow the same structure as dialog, `buttons` follow the same structure
     * @param {Array&lt;object>} [data.inputs=[]]
     * @param {Array&lt;object>} [data.buttons=[]]
     *                 as buttonDialog
     * @param {object} [config] [{title = 'Prompt', defaultButton = 'Ok', options={}}={}] Title of dialog, default button label if no buttons provided,
     * @param {string} [config.title='Prompt']
     * @param {string} [config.defaultButton='Ok']
     * @param {object} [config.options={}] Options passed to the Dialog constructor
     *
     * @example
     *
     * await warpgate.menu({
     *  inputs: [{
     *    label: 'My Way',
     *    type: 'radio',
     *    options: 'group1'
     *  }, {
     *    label: 'The Highway',
     *    type: 'radio',
     *    options: 'group1'
     *  }],
     *  buttons: [{
     *    label: 'Yes',
     *    value: 1
     *  }, {
     *    label: 'No',
     *    value: 2
     *  }, {
     *    label: 'Maybe',
     *    value: 3
     *  }, {
     *    label: 'Eventually',
     *    value: 4
     *  }]
     * }, {
     *  options: {
     *    width: '100px',
     *    height: '100%'
     *  }
     * })
     *
     *
     * @return {Promise&lt;{ inputs: Array&lt;any>, buttons: any}>} Same as `dialog` with the chosen button value append to the end IFF the default button was not used
     */
    static async menu({
      inputs = [],
      buttons = []
    } = {}, {
      title = 'Prompt',
      defaultButton = 'Ok',
      options = {}
    } = {}) {

      return await new Promise((resolve) => {
        let content = MODULE.dialogInputs(inputs);

        /** @type Object&lt;string, Dialog.Button> */
        let buttonData = {}

        buttons.forEach((button) => {
          buttonData[button.label] = {
            label: button.label,
            callback: (html) => {
              const results = {
                inputs: MODULE._innerValueParse(inputs, html),
                buttons: button.value
              }
              resolve(results);
            }
          }
        });

        /* insert standard submit button if none provided */
        if (buttons.length &lt; 1) {
          buttonData = {
            Ok: {
              label: defaultButton,
              callback: (html) => {
                const results = {inputs: MODULE._innerValueParse(inputs, html), buttons: true};
                resolve(results);
              }
            }
          }
        }

        new Dialog({
          title,
          content,
          close: (html) => resolve({inputs: MODULE._innerValueParse(inputs,html), buttons: false}),
          buttons: buttonData,
        }, options).render(true);
      });
    }

    static _innerValueParse(data, html) {
      return Array(data.length).fill(null).map((_, i) => {
        const { type } = data[i];
        if (type.toLowerCase() === `select`) {
          return html.find(`select#${i}qd`).val();
        } else {
          switch (type.toLowerCase()) {
            case `text`:
            case `password`:
              return html.find(`input#${i}qd`)[0].value;
            case `radio`:
              return html.find(`input#${i}qd`)[0].checked ? html.find(`input#${i}qd`)[0].value : false;
            case `checkbox`:
              return html.find(`input#${i}qd`)[0].checked;
            case `number`:
              return html.find(`input#${i}qd`)[0].valueAsNumber;
          }
        }
      })
    }
  }
</code></pre>
        </article>
    </section>




    </div>

    <footer class="footer" id="footer">
      
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"MODULE","link":"<a href=\"MODULE.html\">MODULE</a>"},{"title":"MODULE.applySettings","link":"<a href=\"MODULE.html#.applySettings\">MODULE &rtrif; applySettings</a>"},{"title":"MODULE.buttonDialog","link":"<a href=\"MODULE.html#.buttonDialog\">MODULE &rtrif; buttonDialog</a>"},{"title":"MODULE.firstOwner","link":"<a href=\"MODULE.html#.firstOwner\">MODULE &rtrif; firstOwner</a>"},{"title":"MODULE.format","link":"<a href=\"MODULE.html#.format\">MODULE &rtrif; format</a>"},{"title":"MODULE.getTokenData","link":"<a href=\"MODULE.html#.getTokenData\">MODULE &rtrif; getTokenData</a>"},{"title":"MODULE.isFirstOwner","link":"<a href=\"MODULE.html#.isFirstOwner\">MODULE &rtrif; isFirstOwner</a>"},{"title":"MODULE.localize","link":"<a href=\"MODULE.html#.localize\">MODULE &rtrif; localize</a>"},{"title":"MODULE.menu","link":"<a href=\"MODULE.html#.menu\">MODULE &rtrif; menu</a>"},{"title":"MODULE.setting","link":"<a href=\"MODULE.html#.setting\">MODULE &rtrif; setting</a>"},{"title":"MODULE.unique","link":"<a href=\"MODULE.html#.unique\">MODULE &rtrif; unique</a>"},{"title":"MODULE.wait","link":"<a href=\"MODULE.html#.wait\">MODULE &rtrif; wait</a>"},{"title":"MODULE.waitFor","link":"<a href=\"MODULE.html#.waitFor\">MODULE &rtrif; waitFor</a>"},{"title":"Mutation","link":"<a href=\"Mutation.html\">Mutation</a>"},{"title":"Mutation.fromStackData","link":"<a href=\"Mutation.html#.fromStackData\">Mutation &rtrif; fromStackData</a>"},{"title":"Mutation#_invertUpdate","link":"<a href=\"Mutation.html#_invertUpdate\">Mutation &rtrif; _invertUpdate</a>"},{"title":"Mutation#_mergeEmbeddedUpdate","link":"<a href=\"Mutation.html#_mergeEmbeddedUpdate\">Mutation &rtrif; _mergeEmbeddedUpdate</a>"},{"title":"Mutation#add","link":"<a href=\"Mutation.html#add\">Mutation &rtrif; add</a>"},{"title":"Mutation#addEmbedded","link":"<a href=\"Mutation.html#addEmbedded\">Mutation &rtrif; addEmbedded</a>"},{"title":"Mutation#callAll","link":"<a href=\"Mutation.html#callAll\">Mutation &rtrif; callAll</a>"},{"title":"Mutation#callback","link":"<a href=\"Mutation.html#callback\">Mutation &rtrif; callback</a>"},{"title":"Mutation#description","link":"<a href=\"Mutation.html#description\">Mutation &rtrif; description</a>"},{"title":"Mutation#getUpdate","link":"<a href=\"Mutation.html#getUpdate\">Mutation &rtrif; getUpdate</a>"},{"title":"Mutation#hidden","link":"<a href=\"Mutation.html#hidden\">Mutation &rtrif; hidden</a>"},{"title":"Mutation#link","link":"<a href=\"Mutation.html#link\">Mutation &rtrif; link</a>"},{"title":"Mutation#name","link":"<a href=\"Mutation.html#name\">Mutation &rtrif; name</a>"},{"title":"Mutation#permanent","link":"<a href=\"Mutation.html#permanent\">Mutation &rtrif; permanent</a>"},{"title":"MutationStack","link":"<a href=\"MutationStack.html\">MutationStack</a>"},{"title":"MutationStack#commit","link":"<a href=\"MutationStack.html#commit\">MutationStack &rtrif; commit</a>"},{"title":"MutationStack#create","link":"<a href=\"MutationStack.html#create\">MutationStack &rtrif; create</a>"},{"title":"MutationStack#deleteAll","link":"<a href=\"MutationStack.html#deleteAll\">MutationStack &rtrif; deleteAll</a>"},{"title":"MutationStack#set","link":"<a href=\"MutationStack.html#set\">MutationStack &rtrif; set</a>"},{"title":"MutationStack#unroll","link":"<a href=\"MutationStack.html#unroll\">MutationStack &rtrif; unroll</a>"},{"title":"MutationStack#updateAll","link":"<a href=\"MutationStack.html#updateAll\">MutationStack &rtrif; updateAll</a>"},{"title":"StackData","link":"<a href=\"StackData.html\">StackData</a>"},{"title":"UpdateQueue","link":"<a href=\"UpdateQueue.html\">UpdateQueue</a>"},{"title":"Collection","link":"<a href=\"external-Collection.html\">Collection</a>"},{"title":"DocumentData","link":"<a href=\"external-DocumentData.html\">DocumentData</a>"},{"title":"queueUpdate","link":"<a href=\"global.html#queueUpdate\">queueUpdate</a>"},{"title":"warpgate","link":"<a href=\"global.html#warpgate\">warpgate</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    

    


  </body>

</html>
